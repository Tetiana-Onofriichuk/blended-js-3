{"version":3,"file":"modal-I0ITu-m1.js","sources":["../../src/js/refs.js","../../src/js/modal.js"],"sourcesContent":["//Обʼєкт з посиланнями на ДОМ елементи\n\nexport const refs = {\n  categories: document.querySelector('.categories'),\n  products: document.querySelector('.products'),\n  loadMoreBtn: document.querySelector('.button-more'),\n  form: document.querySelector('.search-form'),\n\n  modal: document.querySelector('.modal'),\n\n  notFoundBlock: document.querySelector('.not-found'),\n  itemCount: document.querySelector('[data-count]'),\n  totalPrice: document.querySelector('[data-price]'),\n};\n","// modal.js\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { refs } from './refs';\nimport { createProductModal } from './render-function';\nimport { updateCartCounter, updateWishlistCounter } from './storage';\n\n// НЕ потрібно: видаляємо глобальний слухач подій для modal\n// refs.modal.addEventListener('click', clickAddCart);\n\nexport async function clickAddCart(event) {\n  try {\n    const productId = Number(event.currentTarget.dataset.id);\n    if (!productId) return;\n\n    let cart = JSON.parse(localStorage.getItem('cart')) || [];\n\n    const isInCart = cart.includes(productId);\n\n    if (isInCart) {\n      cart = cart.filter(id => id !== productId);\n    } else {\n      cart.push(productId);\n    }\n\n    localStorage.setItem('cart', JSON.stringify(cart));\n\n    // Змінюємо текст кнопки відповідно до стану\n    event.currentTarget.textContent = isInCart\n      ? 'Add to Cart'\n      : 'Remove from Cart';\n\n    const counter = document.querySelector('[data-cart-count]');\n    if (counter) counter.textContent = cart.length;\n  } catch (error) {\n    console.error('❌ Помилка при оновленні кошика:', error);\n    iziToast.error({\n      message: 'Не вдалося оновити кошик',\n      position: 'topRight',\n    });\n  }\n}\n\nexport async function clickAddWishList(event) {\n  try {\n    const productId = Number(event.currentTarget.dataset.id);\n    if (!productId) return;\n\n    let wishlist = JSON.parse(localStorage.getItem('wishList')) || [];\n\n    const isInWishList = wishlist.includes(productId);\n\n    if (isInWishList) {\n      wishlist = wishlist.filter(id => id !== productId);\n    } else {\n      wishlist.push(productId);\n    }\n\n    // 🟢 Виправлено: правильне використання localStorage\n    localStorage.setItem('wishList', JSON.stringify(wishlist));\n\n    event.currentTarget.textContent = isInWishList\n      ? 'Add to Wishlist'\n      : 'Remove from Wishlist';\n\n    const counter = document.querySelector('[data-wishlist-count]');\n    if (counter) counter.textContent = wishlist.length;\n  } catch (error) {\n    console.error('❌ Помилка при оновленні wishlist:', error);\n    iziToast.error({\n      message: 'Не вдалося оновити wishlist',\n      position: 'topRight',\n    });\n  }\n}\n\nexport function renderModal(product) {\n  const modal = document.querySelector('.modal');\n  modal.innerHTML = createProductModal(product);\n  modal.classList.remove('visually-hidden');\n  modal.classList.add('modal--is-open');\n\n  const addToCartBtn = modal.querySelector('.modal-product__btn--cart');\n  const addToWishList = modal.querySelector('.modal-product__btn--wishlist');\n\n  addToCartBtn.dataset.id = product.id;\n  addToCartBtn.addEventListener('click', clickAddCart);\n\n  addToWishList.dataset.id = product.id;\n  addToWishList.addEventListener('click', clickAddWishList);\n\n  const closeBtn = modal.querySelector('.modal__close-btn');\n  closeBtn?.addEventListener('click', () => {\n    modal.classList.add('visually-hidden');\n    modal.classList.remove('modal--is-open');\n    modal.innerHTML = '';\n  });\n}\nupdateCartCounter();\nupdateWishlistCounter();\n"],"names":["refs","clickAddCart","event","productId","cart","isInCart","id","counter","error","iziToast","clickAddWishList","wishlist","isInWishList","renderModal","product","modal","createProductModal","addToCartBtn","addToWishList","closeBtn","updateCartCounter","updateWishlistCounter"],"mappings":"oGAEY,MAACA,EAAO,CAClB,WAAY,SAAS,cAAc,aAAa,EAChD,SAAU,SAAS,cAAc,WAAW,EAC5C,YAAa,SAAS,cAAc,cAAc,EAClD,KAAM,SAAS,cAAc,cAAc,EAE3C,MAAO,SAAS,cAAc,QAAQ,EAEtC,cAAe,SAAS,cAAc,YAAY,EAClD,UAAW,SAAS,cAAc,cAAc,EAChD,WAAY,SAAS,cAAc,cAAc,CACnD,ECFO,eAAeC,EAAaC,EAAO,CACxC,GAAI,CACF,MAAMC,EAAY,OAAOD,EAAM,cAAc,QAAQ,EAAE,EACvD,GAAI,CAACC,EAAW,OAEhB,IAAIC,EAAO,KAAK,MAAM,aAAa,QAAQ,MAAM,CAAC,GAAK,GAEvD,MAAMC,EAAWD,EAAK,SAASD,CAAS,EAEpCE,EACFD,EAAOA,EAAK,OAAOE,GAAMA,IAAOH,CAAS,EAEzCC,EAAK,KAAKD,CAAS,EAGrB,aAAa,QAAQ,OAAQ,KAAK,UAAUC,CAAI,CAAC,EAGjDF,EAAM,cAAc,YAAcG,EAC9B,cACA,mBAEJ,MAAME,EAAU,SAAS,cAAc,mBAAmB,EACtDA,IAASA,EAAQ,YAAcH,EAAK,OACzC,OAAQI,EAAO,CACd,QAAQ,MAAM,kCAAmCA,CAAK,EACtDC,EAAS,MAAM,CACb,QAAS,2BACT,SAAU,UAChB,CAAK,CACF,CACH,CAEO,eAAeC,EAAiBR,EAAO,CAC5C,GAAI,CACF,MAAMC,EAAY,OAAOD,EAAM,cAAc,QAAQ,EAAE,EACvD,GAAI,CAACC,EAAW,OAEhB,IAAIQ,EAAW,KAAK,MAAM,aAAa,QAAQ,UAAU,CAAC,GAAK,GAE/D,MAAMC,EAAeD,EAAS,SAASR,CAAS,EAE5CS,EACFD,EAAWA,EAAS,OAAOL,GAAMA,IAAOH,CAAS,EAEjDQ,EAAS,KAAKR,CAAS,EAIzB,aAAa,QAAQ,WAAY,KAAK,UAAUQ,CAAQ,CAAC,EAEzDT,EAAM,cAAc,YAAcU,EAC9B,kBACA,uBAEJ,MAAML,EAAU,SAAS,cAAc,uBAAuB,EAC1DA,IAASA,EAAQ,YAAcI,EAAS,OAC7C,OAAQH,EAAO,CACd,QAAQ,MAAM,oCAAqCA,CAAK,EACxDC,EAAS,MAAM,CACb,QAAS,8BACT,SAAU,UAChB,CAAK,CACF,CACH,CAEO,SAASI,EAAYC,EAAS,CACnC,MAAMC,EAAQ,SAAS,cAAc,QAAQ,EAC7CA,EAAM,UAAYC,EAAmBF,CAAO,EAC5CC,EAAM,UAAU,OAAO,iBAAiB,EACxCA,EAAM,UAAU,IAAI,gBAAgB,EAEpC,MAAME,EAAeF,EAAM,cAAc,2BAA2B,EAC9DG,EAAgBH,EAAM,cAAc,+BAA+B,EAEzEE,EAAa,QAAQ,GAAKH,EAAQ,GAClCG,EAAa,iBAAiB,QAAShB,CAAY,EAEnDiB,EAAc,QAAQ,GAAKJ,EAAQ,GACnCI,EAAc,iBAAiB,QAASR,CAAgB,EAExD,MAAMS,EAAWJ,EAAM,cAAc,mBAAmB,EACxDI,GAAA,MAAAA,EAAU,iBAAiB,QAAS,IAAM,CACxCJ,EAAM,UAAU,IAAI,iBAAiB,EACrCA,EAAM,UAAU,OAAO,gBAAgB,EACvCA,EAAM,UAAY,EACtB,EACA,CACAK,IACAC,EAAuB"}