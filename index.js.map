{"version":3,"file":"index.js","sources":["../src/home.js"],"sourcesContent":["//–õ–æ–≥—ñ–∫–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ Home\n// –û–ø–∏—Å–∞–Ω–∏–π —É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó\nimport iziToast from 'izitoast';\n// –î–æ–¥–∞—Ç–∫–æ–≤–∏–π —ñ–º–ø–æ—Ä—Ç —Å—Ç–∏–ª—ñ–≤\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport {\n  getCategories,\n  getProducts,\n  getCategoryProducts,\n  getOneProduct,\n  getSearchProduct,\n} from './js/products-api';\n\nimport { refs } from './js/refs';\n\nimport {\n  renderGallery,\n  renderProducts,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  renderProductsAll,\n} from './js/render-function';\n\nimport { renderModal } from './js/modal';\nrefs.categories.addEventListener('click', handleClick);\nrefs.loadMoreBtn.addEventListener('click', handleLoadMore);\nrefs.products.addEventListener('click', cardclick);\nrefs.form.addEventListener('submit', handlesubmit);\n\nlet currentPage = 1;\nlet currentCategory = null;\n\nasync function showCategories() {\n  try {\n    const response = await getCategories();\n    const info = response;\n    renderGallery(info);\n  } catch (error) {\n    iziToast.error({\n      message: '–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Ç—ñ!',\n      position: 'topRight',\n    });\n  }\n}\nshowCategories();\n\nasync function showProducts(page = 1) {\n  try {\n    const response = await getProducts(page);\n    const items = response.products;\n    renderProducts(items);\n  } catch (error) {\n    console.log('‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤:', error);\n  }\n}\n\nshowProducts();\n\nasync function handleClick(event) {\n  const target = event.target;\n\n  const button = target.closest('.categories__btn');\n  if (!button) return; // –ö–ª—ñ–∫ –Ω–µ –ø–æ –∫–Ω–æ–ø—Ü—ñ ‚Äî —ñ–≥–Ω–æ—Ä—É—î–º–æ\n\n  const li = button.closest('.categories_item'); // –∑–Ω–∞—Ö–æ–¥–∏–º–æ –Ω–∞–π–±–ª–∏–∂—á–æ–≥–æ –ø—Ä–µ–¥–∫–∞\n  if (!li) return;\n\n  const categoryId = li.dataset.id;\n  console.log('–í–∏–±—Ä–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è:', categoryId);\n\n  const allButtons = document.querySelectorAll('.categories__btn');\n  allButtons.forEach(btn => btn.classList.remove('categories__btn--active'));\n  button.classList.add('categories__btn--active');\n\n  currentCategory = categoryId; // üü† –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –ø–æ—Ç–æ—á–Ω—É –∫–∞—Ç–µ–≥–æ—Ä—ñ—é\n  currentPage = 1; // üü† –ø–æ—á–∏–Ω–∞—î–º–æ –∑ –ø–µ—Ä—à–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏\n\n  showCategoriesProducts(categoryId); // ‚¨ÖÔ∏è –î–û–î–ê–ô –¶–ï–ô –í–ò–ö–õ–ò–ö\n\n  async function showCategoriesProducts(id) {\n    try {\n      const response = await getCategoryProducts(id);\n      const items = response.products;\n      renderProducts(items);\n      if (items.length >= 12) {\n        refs.loadMoreBtn.classList.remove('hiddenbtn');\n      } else {\n        refs.loadMoreBtn.classList.add('hiddenbtn');\n      }\n    } catch (error) {\n      console.log('‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤:', error);\n    }\n  }\n}\n\nasync function handleLoadMore() {\n  currentPage += 1;\n  refs.loadMoreBtn.disabled = true;\n\n  try {\n    const response = await getProducts(currentPage); // ‚úÖ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ\n    const item = response.products;\n\n    renderProductsAll(item);\n\n    // –Ø–∫—â–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ –º–µ–Ω—à–µ –Ω—ñ–∂ 12 ‚Äì –±—ñ–ª—å—à–µ –Ω–µ–º–∞—î\n    if (item.length < 12) {\n      hideLoadMoreButton();\n      iziToast.info({\n        message: '–£—Å—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ.',\n        position: 'bottomCenter',\n        timeout: 3000,\n      });\n    }\n\n    // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞\n    const card = document.querySelector('.products');\n    const cardHeight = card.getBoundingClientRect().height;\n    window.scrollBy({\n      left: 0,\n      top: cardHeight * 3,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToast.error({\n      message: '–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å',\n      position: 'topRight',\n    });\n  } finally {\n    refs.loadMoreBtn.disabled = false;\n  }\n}\n\nasync function cardclick(event) {\n  const productItem = event.target.closest('.products__item');\n  if (!productItem) return; // –ö–ª—ñ–∫ –Ω–µ –≤ –∫–∞—Ä—Ç–∫—É ‚Äî —ñ–≥–Ω–æ—Ä—É—î–º–æ\n\n  const productId = productItem.dataset.id;\n  console.log('üÜî ID –ø—Ä–æ–¥—É–∫—Ç—É:', productId);\n\n  try {\n    const response = await getOneProduct(productId); // üü¢ –ü–ï–†–ï–î–ê–Ñ–ú–û productId, –Ω–µ \"id\"\n    const product = response; // API –ø–æ–≤–µ—Ä—Ç–∞—î —Å–∞–º –æ–±'—î–∫—Ç, –∞ –Ω–µ product.productId\n\n    const modal = document.querySelector('.modal'); // üü¢ —Å–µ–ª–µ–∫—Ç–æ—Ä –±–µ–∑ 'div.' ‚Äî –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –∫–ª–∞—Å—É\n    modal.classList.add('modal--is-open'); // üü¢ –∫–ª–∞—Å –º–∞—î –±—É—Ç–∏ —Ä—è–¥–∫–æ–º, –Ω–µ –∑–º—ñ–Ω–Ω–æ—é\n\n    renderModal(product); // üü¢ –ü–µ—Ä–µ–¥–∞—î–º–æ –¥–∞–Ω—ñ, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ id\n  } catch (error) {\n    console.log('‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ –ø—Ä–æ–¥—É–∫—Ç—É –ø–æ ID:', error);\n    iziToast.error({\n      message: '–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Ç—ñ!',\n      position: 'topRight',\n    });\n  }\n}\n\nasync function handlesubmit(event) {\n  event.preventDefault();\n\n  const inputValue = refs.form.elements['searchValue'].value.trim();\n\n  if (inputValue === '') {\n    iziToast.warning({\n      message: '–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  try {\n    const response = await getSearchProduct(inputValue);\n\n    const products = response.products;\n    if (!products || products.length === 0) {\n      iziToast.info({ message: '–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞ –∑–∞–ø–∏—Ç–æ–º.' });\n      return;\n    }\n\n    renderProducts(products);\n  } catch (error) {\n    console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Ç—ñ –ø–æ—à—É–∫—É:', error);\n    iziToast.error({\n      message: '–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Ç—ñ!',\n      position: 'topRight',\n    });\n  }\n}\n"],"names":["refs","handleClick","handleLoadMore","cardclick","handlesubmit","currentPage","showCategories","info","getCategories","renderGallery","iziToast","showProducts","page","items","getProducts","renderProducts","error","event","button","li","categoryId","btn","showCategoriesProducts","id","getCategoryProducts","item","renderProductsAll","hideLoadMoreButton","cardHeight","productItem","productId","product","getOneProduct","renderModal","inputValue","products","getSearchProduct"],"mappings":"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"}